{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/savas/Downloads/agenttest/EylulSanatWeb/src/components/admin/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/Sidebar.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/Sidebar.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","ignoreList":[0]}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/savas/Downloads/agenttest/EylulSanatWeb/src/components/admin/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/Sidebar.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/Sidebar.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgR,GAC7S,8CACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/savas/Downloads/agenttest/EylulSanatWeb/src/lib/session.ts"],"sourcesContent":["import 'server-only';\r\nimport { SignJWT, jwtVerify } from 'jose';\r\nimport { cookies } from 'next/headers';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst logFile = path.join(process.cwd(), 'session-debug.log');\r\nfunction log(msg: string) {\r\n    try {\r\n        const timestamp = new Date().toISOString();\r\n        fs.appendFileSync(logFile, `${timestamp}: ${msg}\\n`);\r\n    } catch (e) {\r\n        // ignore\r\n    }\r\n}\r\n\r\nconst secretKey = process.env.SESSION_SECRET || 'default_secret_key_change_me_in_production';\r\nconst encodedKey = new TextEncoder().encode(secretKey);\r\n\r\nexport async function encrypt(payload: any) {\r\n    return new SignJWT(payload)\r\n        .setProtectedHeader({ alg: 'HS256' })\r\n        .setIssuedAt()\r\n        .setExpirationTime('7d')\r\n        .sign(encodedKey);\r\n}\r\n\r\nexport async function decrypt(session: string | undefined = '') {\r\n    try {\r\n        const { payload } = await jwtVerify(session, encodedKey, {\r\n            algorithms: ['HS256'],\r\n        });\r\n        return payload;\r\n    } catch (error: any) {\r\n        log(`Decrypt failed: ${error.message}`);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function createSession() {\r\n    const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);\r\n    const session = await encrypt({ role: 'admin', expiresAt });\r\n    const cookieStore = await cookies();\r\n\r\n    log(`Creating session. Cookie set. Expires: ${expiresAt}`);\r\n\r\n    cookieStore.set('session', session, {\r\n        httpOnly: true,\r\n        secure: false, // Debugging: Relax security to rule out SSL mix-ups\r\n        expires: expiresAt,\r\n        sameSite: 'lax',\r\n        path: '/',\r\n    });\r\n}\r\n\r\nexport async function verifySession() {\r\n    const cookieStore = await cookies();\r\n    const session = cookieStore.get('session')?.value;\r\n\r\n    if (!session) {\r\n        log('Verify: No session cookie found');\r\n        return null;\r\n    }\r\n\r\n    const payload = await decrypt(session);\r\n\r\n    if (!payload) {\r\n        log('Verify: Payload decryption failed');\r\n        return null;\r\n    }\r\n\r\n    log('Verify: Success');\r\n    return { isAuth: true };\r\n}\r\n\r\nexport async function deleteSession() {\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete('session');\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AACzC,SAAS,IAAI,GAAW;IACpB,IAAI;QACA,MAAM,YAAY,IAAI,OAAO,WAAW;QACxC,wGAAE,CAAC,cAAc,CAAC,SAAS,GAAG,UAAU,EAAE,EAAE,IAAI,EAAE,CAAC;IACvD,EAAE,OAAO,GAAG;IACR,SAAS;IACb;AACJ;AAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,cAAc,IAAI;AAChD,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC;AAErC,eAAe,QAAQ,OAAY;IACtC,OAAO,IAAI,gKAAO,CAAC,SACd,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,MAClB,IAAI,CAAC;AACd;AAEO,eAAe,QAAQ,UAA8B,EAAE;IAC1D,IAAI;QACA,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,oKAAS,EAAC,SAAS,YAAY;YACrD,YAAY;gBAAC;aAAQ;QACzB;QACA,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,IAAI,CAAC,gBAAgB,EAAE,MAAM,OAAO,EAAE;QACtC,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK;IAC3D,MAAM,UAAU,MAAM,QAAQ;QAAE,MAAM;QAAS;IAAU;IACzD,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,IAAI,CAAC,uCAAuC,EAAE,WAAW;IAEzD,YAAY,GAAG,CAAC,WAAW,SAAS;QAChC,UAAU;QACV,QAAQ;QACR,SAAS;QACT,UAAU;QACV,MAAM;IACV;AACJ;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,UAAU,YAAY,GAAG,CAAC,YAAY;IAE5C,IAAI,CAAC,SAAS;QACV,IAAI;QACJ,OAAO;IACX;IAEA,MAAM,UAAU,MAAM,QAAQ;IAE9B,IAAI,CAAC,SAAS;QACV,IAAI;QACJ,OAAO;IACX;IAEA,IAAI;IACJ,OAAO;QAAE,QAAQ;IAAK;AAC1B;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;AACvB"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/savas/Downloads/agenttest/EylulSanatWeb/src/app/admin/%28dashboard%29/layout.tsx"],"sourcesContent":["import Sidebar from '@/components/admin/Sidebar';\r\nimport { verifySession } from '@/lib/session';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport default async function DashboardLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const session = await verifySession();\r\n\r\n    if (!session?.isAuth) {\r\n        redirect('/admin/login');\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-gray-50\">\r\n            <Sidebar />\r\n            <main className=\"flex-1 ml-64 p-8\">\r\n                <div className=\"max-w-6xl mx-auto space-y-8\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;;;;;AAEe,eAAe,gBAAgB,EAC1C,QAAQ,EAGX;IACG,MAAM,UAAU,MAAM,IAAA,sIAAa;IAEnC,IAAI,CAAC,SAAS,QAAQ;QAClB,IAAA,iMAAQ,EAAC;IACb;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,iJAAO;;;;;0BACR,8OAAC;gBAAK,WAAU;0BACZ,cAAA,8OAAC;oBAAI,WAAU;8BACV;;;;;;;;;;;;;;;;;AAKrB"}}]
}