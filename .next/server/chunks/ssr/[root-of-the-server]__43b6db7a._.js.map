{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../src/actions/upload.ts","../../../../src/actions/courses.ts","../../../../.next-internal/server/app/admin/%28dashboard%29/courses/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","'use server';\r\n\r\nimport { writeFile, mkdir } from 'fs/promises';\r\nimport { join } from 'path';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport async function uploadImage(formData: FormData) {\r\n    const file = formData.get('file') as File;\r\n    if (!file) {\r\n        throw new Error('Dosya seçilmedi');\r\n    }\r\n\r\n    const bytes = await file.arrayBuffer();\r\n    const buffer = Buffer.from(bytes);\r\n\r\n    // Allow only images\r\n    if (!file.type.startsWith('image/')) {\r\n        throw new Error('Sadece resim dosyaları yüklenebilir');\r\n    }\r\n\r\n    const uniqueSuffix = uuidv4();\r\n    const originalName = file.name.replace(/\\.[^/.]+$/, \"\").replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n    const ext = file.name.split('.').pop();\r\n    const filename = `${originalName}-${uniqueSuffix}.${ext}`;\r\n\r\n    const uploadDir = join(process.cwd(), 'public', 'uploads');\r\n\r\n    // Ensure directory exists\r\n    try {\r\n        await mkdir(uploadDir, { recursive: true });\r\n    } catch (e) {\r\n        // ignore\r\n    }\r\n\r\n    const filepath = join(uploadDir, filename);\r\n    await writeFile(filepath, buffer);\r\n\r\n    return `/uploads/${filename}`;\r\n}\r\n","'use server';\r\n\r\nimport { db } from '@/lib/json-db';\r\nimport { Course } from '@/types';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function createCourse(formData: FormData) {\r\n    const title = formData.get('title') as string;\r\n    const description = formData.get('description') as string;\r\n    const price = parseFloat(formData.get('price') as string);\r\n    const duration = formData.get('duration') as string;\r\n    const image = formData.get('image') as string;\r\n    const isActive = formData.get('isActive') === 'on';\r\n\r\n    // Process list fields\r\n    const learningOutcomesStr = formData.get('learningOutcomes') as string || '';\r\n    const educationMethodsStr = formData.get('educationMethods') as string || '';\r\n\r\n    const learningOutcomes = learningOutcomesStr.split('\\n').map(s => s.trim()).filter(Boolean);\r\n    const educationMethods = educationMethodsStr.split('\\n').map(s => s.trim()).filter(Boolean);\r\n\r\n    const slug = title.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\r\n\r\n    const newCourse: Course = {\r\n        id: uuidv4(),\r\n        title,\r\n        slug,\r\n        description,\r\n        price,\r\n        duration,\r\n        image,\r\n        isActive,\r\n        learningOutcomes,\r\n        educationMethods,\r\n    };\r\n\r\n    const courses = await db.courses.getAll();\r\n    courses.push(newCourse);\r\n    await db.courses.updateAll(courses);\r\n\r\n    revalidatePath('/admin/courses');\r\n    revalidatePath('/kurslar');\r\n    return { success: true };\r\n}\r\n\r\nexport async function updateCourse(id: string, formData: FormData) {\r\n    const courses = await db.courses.getAll();\r\n    const index = courses.findIndex(c => c.id === id);\r\n\r\n    if (index === -1) throw new Error('Kurs bulunamadı');\r\n\r\n    const title = formData.get('title') as string;\r\n    const slug = title.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\r\n\r\n    // Process list fields\r\n    const learningOutcomesStr = formData.get('learningOutcomes') as string || '';\r\n    const educationMethodsStr = formData.get('educationMethods') as string || '';\r\n\r\n    const learningOutcomes = learningOutcomesStr.split('\\n').map(s => s.trim()).filter(Boolean);\r\n    const educationMethods = educationMethodsStr.split('\\n').map(s => s.trim()).filter(Boolean);\r\n\r\n    courses[index] = {\r\n        ...courses[index],\r\n        title,\r\n        slug,\r\n        description: formData.get('description') as string,\r\n        price: parseFloat(formData.get('price') as string),\r\n        duration: formData.get('duration') as string,\r\n        image: formData.get('image') as string,\r\n        isActive: formData.get('isActive') === 'on',\r\n        learningOutcomes,\r\n        educationMethods,\r\n    };\r\n\r\n    await db.courses.updateAll(courses);\r\n    revalidatePath('/admin/courses');\r\n    revalidatePath('/kurslar');\r\n    revalidatePath(`/kurslar/${courses[index].slug}`);\r\n    return { success: true };\r\n}\r\n\r\nexport async function deleteCourse(id: string) {\r\n    let courses = await db.courses.getAll();\r\n    courses = courses.filter(c => c.id !== id);\r\n    await db.courses.updateAll(courses);\r\n    revalidatePath('/admin/courses');\r\n    revalidatePath('/kurslar');\r\n}\r\n","export {logout as '0045e9b9d28bc56362bae83ded660aa300f0f050e3'} from 'ACTIONS_MODULE0'\nexport {uploadImage as '40f282f1b7f6ba2f9131f89b460fc154dd7302e6d3'} from 'ACTIONS_MODULE1'\nexport {createCourse as '40773bc76719b23ed73da501f68b2fa6cd41e85237'} from 'ACTIONS_MODULE2'\nexport {updateCourse as '609a11fe3788b149fee237e5ea484b05115cec0d98'} from 'ACTIONS_MODULE2'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}